<!doctype html>
<html class="no-js" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WTF - Weather, Food and Travel</title>
    <link rel="stylesheet" href="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
    #map {
    height: 400px;
    width: 80%;
    margin: 30px auto;
    }
    </style>
  </head>
  <body>

    <!-- Start Top Bar -->
    <div class="top-bar">
      <div class="top-bar-left">
        <ul class="menu">
          <li class="menu-text"></li>
          <li><a href="#">Weather</a></li>
          <li><a href="#">Transportation</a></li>
          <li><a href="#">Food</a></li>
        </ul>
      </div>
    </div>
    <!-- End Top Bar -->

    <div class="callout large primary">
      <div class="row column text-center">
        <h1>WTF</h1>
        <h2 class="subheader">Weather, Travel and Food App</h2>
      </div>
    </div>

    <!-- We can now combine rows and columns when there's only one column in that row -->
    <div class="row medium-8 large-7 columns">
      <div class="blog-post text-center">
        <div id="map"></div>
        <input id="search" type="text" placeholder="Enter a city and state or a zip code">
        <button id="destination" type="button" class="primary button round">Find Destination</button>
        <p><button id="find" type="button" class="success button round">Current Location</button></p>
      </div>

    <script src="https://code.jquery.com/jquery-2.1.4.min.js"></script>
    <script src="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.js"></script>
   
<script>
         
$("#find").click(function initMap() {

let location = new Object();
navigator.geolocation.getCurrentPosition(function(pos) {
    location.lat = pos.coords.latitude;
    location.long = pos.coords.longitude;
    map = new google.maps.Map(document.getElementById("map"), {
        center: { lat: location.lat, lng: location.long },
        zoom: 16,
    });
    currentLat = location.lat;
    currentLong = location.long;
    let currentLocation = { lat: location.lat, lng: location.long };
    let marker = new google.maps.Marker({
        position: currentLocation,
        map: map
    });

    google.maps.event.addListener(search, 'places_changed', function() {
    document.getElementById("destination").onclick = function () {
    var input = document.getElementById("search");

    google.maps.event.trigger(input, "focus", {});
    google.maps.event.trigger(input, "keydown", { keyCode: 13 });
    google.maps.event.trigger(this, "focus", {});
    }
    
    $(document).ready(function () {
  // wire up button click
  $('#go').click(function () {
    // test for presence of geolocation
    if(navigator && navigator.geolocation) {
      // make the request for the user's position
      navigator.geolocation.getCurrentPosition(geo_success, geo_error);
    } else {
      // use MaxMind IP to location API fallback
      printAddress(geoip_latitude(), geoip_longitude(), true);
    }
  });
});
 
 
function geo_success(position) {
  printAddress(position.coords.latitude, position.coords.longitude);
}
 
function geo_error(err) {
  // instead of displaying an error, fall back to MaxMind IP to location library
  printAddress(geoip_latitude(), geoip_longitude(), true);
}
 
// use Google Maps API to reverse geocode our location
function printAddress(latitude, longitude, isMaxMind) {
    // set up the Geocoder object
    var geocoder = new google.maps.Geocoder();
 
    // turn coordinates into an object
    var yourLocation = new google.maps.LatLng(latitude, longitude);
 
    // find out info about our location
    geocoder.geocode({ 'latLng': yourLocation }, function (results, status) {
    if(status == google.maps.GeocoderStatus.OK) {
      if(results[0]) {
        $('#results').fadeOut(function() {
          $(this).html('<p><b>Abracadabra!</b> My guess is:</p><p><em>' + results[0].formatted_address + '</em></p>').fadeIn();
        })
      } else {
        error('Google did not return any results.');
      }
    } else {
      error("Reverse Geocoding failed due to: " + status);
    }
  });
 
  // if we used MaxMind for location, add attribution link
//   if(isMaxMind) {
//     $('body').append('<p><a href="http://www.maxmind.com" target="_blank">IP to Location Service Provided by MaxMind</a></p>');
//   }
}
 
function error(msg) {
  alert(msg);
}
});
    

});

})

    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBs0DXvW7g88kD3-OS7i4HXHzl_oPAP1LQ&callback=initMap">
    </script>
  </body>
</html>



